(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{126:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/atmonitor-add-project-f62e6168b95a2d734a6c6b60bba73526.png"},127:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/atmonitor-started-a2dc253c4ecad2f94b5afa4001cb1c3a.png"},128:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/react-app-44619da7cfe2bc83e7d3f91d33019e88.png"},129:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/atbuilder-deployed-resources-4febe13ea6534f1ff65b8a1e378ad623.png"},73:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return b})),a.d(t,"metadata",(function(){return p})),a.d(t,"toc",(function(){return i})),a.d(t,"default",(function(){return l}));var n=a(3),r=a(7),c=(a(0),a(86)),b={slug:"/",title:"create-atvise-app",sidebar_label:"Introduction"},p={unversionedId:"README",id:"README",isDocsHomePage:!1,title:"create-atvise-app",description:"Tools to integrate atvise into your modern web app project.",source:"@site/docs/README.md",slug:"/",permalink:"/create-atvise-app/docs/",editUrl:"https://github.com/LukasHechenberger/create-atvise-app/edit/master/packages/gh-pages/docs/README.md",version:"current",sidebar_label:"Introduction",sidebar:"someSidebar",next:{title:"atvise-scripts",permalink:"/create-atvise-app/docs/packages/atvise-scripts"}},i=[{value:"Overview",id:"overview",children:[]},{value:"Quickstart",id:"quickstart",children:[]},{value:"Development",id:"development",children:[]},{value:"Deployment",id:"deployment",children:[]},{value:"Configuration",id:"configuration",children:[]},{value:"Limitations",id:"limitations",children:[]},{value:"What&#39;s included?",id:"whats-included",children:[]},{value:"Packages",id:"packages",children:[]}],o={toc:i};function l(e){var t=e.components,b=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(n.a)({},o,b,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,"Tools to integrate atvise into your modern web app project."),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},Object(c.b)("strong",{parentName:"p"},"Note:")," This project is currently under development.")),Object(c.b)("h2",{id:"overview"},"Overview"),Object(c.b)("p",null,Object(c.b)("em",{parentName:"p"},"create-atvise-app")," sets up a modern React development environment for your atvise project in no time. It's built upon facebook's ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"https://create-react-app.dev"}),Object(c.b)("em",{parentName:"a"},"create-react-app")),"."),Object(c.b)("h2",{id:"quickstart"},"Quickstart"),Object(c.b)("p",null,"First, make sure you have ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"https://nodejs.org/en/"}),"node.js")," (version 12 or newer) installed."),Object(c.b)("blockquote",null,Object(c.b)("details",null,Object(c.b)("summary",null,"How?"),Object(c.b)("p",{parentName:"blockquote"},"Run ",Object(c.b)("inlineCode",{parentName:"p"},"node --version")," on the command line."),Object(c.b)("pre",{parentName:"blockquote"},Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-sh"}),"node --version\nv12.18.2 # The node.js version installed\n")),Object(c.b)("p",{parentName:"blockquote"},"If this command fails or prints a version number lower than ",Object(c.b)("em",{parentName:"p"},"12")," download and install the latest LTS (long term support) version from ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"https://nodejs.org/en/"}),"nodejs.org"),"."))),Object(c.b)("p",null,"Next, run ",Object(c.b)("em",{parentName:"p"},"create-react-app")," to create a new project:"),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},"Don't worry about installing ",Object(c.b)("em",{parentName:"p"},"create-react-app"),", ",Object(c.b)("inlineCode",{parentName:"p"},"npx")," (npm package runner, shipped with node.js) does this for you \ud83d\ude00")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"npx create-react-app \\\n  --template @atvise/cra-template \\\n  --scripts-version @atvise/react-scripts \\\n  --use-npm \\\n  my-app\n\ncd my-app\n")),Object(c.b)("p",null,"What this does:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Use the custom atvise create-react-app template ",Object(c.b)("em",{parentName:"p"},"@atvise/cra-template")),Object(c.b)("blockquote",{parentName:"li"},Object(c.b)("details",null,Object(c.b)("summary",null,"Use ",Object(c.b)("i",null,"@atvise/cra-template-typescript")," to setup ",Object(c.b)("strong",null,"TypeScript support")),Object(c.b)("pre",{parentName:"blockquote"},Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"npx create-react-app \\\n  --template @atvise/cra-template-typescript \\\n  --scripts-version @atvise/react-scripts \\\n  --use-npm \\\n  my-ts-app\n\ncd my-ts-app\n"))))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Use an adapted version of react-scripts ",Object(c.b)("em",{parentName:"p"},"@atvise/react-scripts"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Use ",Object(c.b)("em",{parentName:"p"},"npm")," instead of ",Object(c.b)("em",{parentName:"p"},"yarn")," to install packages (optional)"))),Object(c.b)("p",null,"Running ",Object(c.b)("inlineCode",{parentName:"p"},"create-react-app")," will generate the initial project structure and install all the tools and resources required to build and run your app. These are the most important files:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-sh"}),"my-app\n\u251c\u2500\u2500 README.md               # Contains information on how to run the app\n\u251c\u2500\u2500 node_modules            # Contains the app's dependencies\n\u251c\u2500\u2500 package.json            # The app's manifest file\n\u251c\u2500\u2500 .atviserc.json          # Project configuration\n\u251c\u2500\u2500 public                  # Put your static files in here, e.g. images\n\u2502   \u2514\u2500\u2500 index.html          # The file you see when you open your browser\n\u2514\u2500\u2500 src                     # Contains your project's source files\n    \u251c\u2500\u2500 App.js              # The App component (React)\n    \u2514\u2500\u2500 index.js            # Renders the 'App' component\n")),Object(c.b)("p",null,"All in all, we have a fully functional React/atvise app at this point, no more configuration required. Let's test it!"),Object(c.b)("p",null,"First, you have to ",Object(c.b)("strong",{parentName:"p"},"start an atvise server")," in the ",Object(c.b)("inlineCode",{parentName:"p"},"atserver")," directory. The easiest way to do so is via the atvise Project Console."),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Create a new project"),Object(c.b)("p",{parentName:"li"},Object(c.b)("img",{alt:"Start atvise server",src:a(126).default}))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Select the ",Object(c.b)("inlineCode",{parentName:"p"},"atserver")," directory as it's path")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Click ",Object(c.b)("em",{parentName:"p"},"OK")," to create it and")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"Make sure that the ports ",Object(c.b)("em",{parentName:"p"},"4844")," and ",Object(c.b)("em",{parentName:"p"},"8084")," are selected and start atvise server via the \u25b6\ufe0f-Button"),Object(c.b)("p",{parentName:"li"},Object(c.b)("img",{alt:"Start atvise server",src:a(127).default})),Object(c.b)("p",{parentName:"li"},"Jump to ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#configuration"}),"Configuration")," if you need to use other ports."))),Object(c.b)("blockquote",null,Object(c.b)("details",null,Object(c.b)("summary",null,"You can also start atvise server from the command line"),Object(c.b)("p",{parentName:"blockquote"},Object(c.b)("strong",{parentName:"p"},"On Windows")),Object(c.b)("pre",{parentName:"blockquote"},Object(c.b)("code",Object(n.a)({parentName:"pre"},{}),'"C:\\Program Files\\atvise\\atserver.exe" /proj=%cd% atserver/nodes.db /boot\n')),Object(c.b)("p",{parentName:"blockquote"},Object(c.b)("strong",{parentName:"p"},"On Linux")),Object(c.b)("pre",{parentName:"blockquote"},Object(c.b)("code",Object(n.a)({parentName:"pre"},{}),"atserver --proj $(pwd) --boot\n")))),Object(c.b)("p",null,"Now we're ready to start the React development server:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{}),"npm start\n")),Object(c.b)("p",null,"This will open your browser and show a fully functional React app, displaying the value of an atvise variable:"),Object(c.b)("p",null,Object(c.b)("img",{alt:"React app",src:a(128).default})),Object(c.b)("h2",{id:"development"},"Development"),Object(c.b)("p",null,"This project makes very little assumptions on how you will develop your React app: You can use almost all UI libraries, routers, internationalization frameworks etc. that work with react."),Object(c.b)("p",null,"Additionally, the ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"./packages/react"}),Object(c.b)("inlineCode",{parentName:"a"},"@atvise/webmi-react"))," package provides data bindings between your react app and atvise server. For example, you can use the ",Object(c.b)("inlineCode",{parentName:"p"},"useSubscription")," hook to display a variable's value:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),"import { useSubscription } from '@atvise/webmi-react';\n\n/**\n * @example\n * <MyLabel address=\"AGENT.OBJECTS.test\" />\n */\nfunction MyLabel(props) {\n  const { loading, data, error } = useSubscription(props.address);\n\n  if (loading) return <i>loading...</i>;\n  if (error) return <i>An error ocurred</i>;\n\n  return <p>AGENT.OBJECTS.test currently is: {data.value}</p>;\n}\n")),Object(c.b)("p",null,"Check out the ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"./packages/react"}),Object(c.b)("inlineCode",{parentName:"a"},"@atvise/webmi-react"))," package for details."),Object(c.b)("h2",{id:"deployment"},"Deployment"),Object(c.b)("p",null,"You can deploy it to your atvise server by running ",Object(c.b)("inlineCode",{parentName:"p"},"npm run deploy"),". This command will create a new production build (by running ",Object(c.b)("inlineCode",{parentName:"p"},"npm run build"),") and upload it to your atvise server's project resources. Afterwards, you should see your react app when you open your atvise server in the browser (usually available at ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"http://localhost:8084"}),"localhost:8084"),")."),Object(c.b)("p",null,"You can view the deployed files in atvise builder by navigating to the project library's resources:"),Object(c.b)("p",null,Object(c.b)("img",{alt:"Deployment in atvise builder",src:a(129).default})),Object(c.b)("h2",{id:"configuration"},"Configuration"),Object(c.b)("p",null,"You can adjust some project settings inside the ",Object(c.b)("inlineCode",{parentName:"p"},".atviserc.json")," file. It contains a reference to it's schema, so autocompletion should be available in modern IDEs. These are the most important properties:"),Object(c.b)("table",null,Object(c.b)("thead",{parentName:"table"},Object(c.b)("tr",{parentName:"thead"},Object(c.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Key"),Object(c.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Description"),Object(c.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Default"))),Object(c.b)("tbody",{parentName:"table"},Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(c.b)("inlineCode",{parentName:"td"},"host")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"The host atvise server is running at"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},'"localhost"'))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(c.b)("inlineCode",{parentName:"td"},"port.opc")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"atvise server's OPC-UA port"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"4840"))),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(c.b)("inlineCode",{parentName:"td"},"port.http")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"atvise server's HTTP port"),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(c.b)("inlineCode",{parentName:"td"},"80"))))),Object(c.b)("h2",{id:"limitations"},"Limitations"),Object(c.b)("p",null,"Using React instead of regular atvise displays and components comes with some drawbacks, too. These are the most important:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},Object(c.b)("strong",{parentName:"p"},"Regular atvise displays cannot be used")," alongside the react app."),Object(c.b)("p",{parentName:"li"},"In addition the ",Object(c.b)("inlineCode",{parentName:"p"},"webMI.display")," API does not work as expected.")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},Object(c.b)("strong",{parentName:"p"},"The graphics functions won't work")),Object(c.b)("p",{parentName:"li"},"Don't use ",Object(c.b)("inlineCode",{parentName:"p"},"webMI.translate")," or ",Object(c.b)("inlineCode",{parentName:"p"},"webMI.gfx"),". You can do almost everything in CSS instead."))),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},"This project is currently under development so there may be additional incompatibilities we don't know about yet - Feel free to ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/LukasHechenberger/create-atvise-app/issues/new"}),"create an issue")," if you find one.")),Object(c.b)("h2",{id:"whats-included"},"What's included?"),Object(c.b)("p",null,"Currently, we only support ",Object(c.b)("strong",{parentName:"p"},"React apps"),", but we're planning to add support for Vue and Angular in the future."),Object(c.b)("h2",{id:"packages"},"Packages"),Object(c.b)("p",null,"The whole project is split into different packages:"),Object(c.b)("table",null,Object(c.b)("thead",{parentName:"table"},Object(c.b)("tr",{parentName:"thead"},Object(c.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Name"),Object(c.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Description"))),Object(c.b)("tbody",{parentName:"table"},Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(c.b)("a",Object(n.a)({parentName:"td"},{href:"./examples/playground"}),"@atvise/caa-playground")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"A playground that allows you to explore the benefits of using React in an atvise project online")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(c.b)("a",Object(n.a)({parentName:"td"},{href:"./packages/atvise-scripts"}),"atvise-scripts")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"The scripts used by create-atvise-app to interact with atvise server")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(c.b)("a",Object(n.a)({parentName:"td"},{href:"./packages/gh-pages"}),"@atvise/caa-docs")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Sources of our docs")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(c.b)("a",Object(n.a)({parentName:"td"},{href:"./packages/modular-webmi"}),"@atvise/modular-webmi")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Modular exports for webmi.js")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(c.b)("a",Object(n.a)({parentName:"td"},{href:"./packages/react"}),"@atvise/webmi-react")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"React bindings for webmi")),Object(c.b)("tr",{parentName:"tbody"},Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(c.b)("a",Object(n.a)({parentName:"td"},{href:"./packages/types-webmi"}),"@atvise/types-webmi")),Object(c.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Type definitions for webmi.js")))))}l.isMDXComponent=!0},86:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return d}));var n=a(0),r=a.n(n);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=r.a.createContext({}),l=function(e){var t=r.a.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):p(p({},t),e)),a},s=function(e){var t=l(e.components);return r.a.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,c=e.originalType,b=e.parentName,o=i(e,["components","mdxType","originalType","parentName"]),s=l(a),m=n,d=s["".concat(b,".").concat(m)]||s[m]||u[m]||c;return a?r.a.createElement(d,p(p({ref:t},o),{},{components:a})):r.a.createElement(d,p({ref:t},o))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var c=a.length,b=new Array(c);b[0]=m;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p.mdxType="string"==typeof e?e:n,b[1]=p;for(var o=2;o<c;o++)b[o]=a[o];return r.a.createElement.apply(null,b)}return r.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"}}]);