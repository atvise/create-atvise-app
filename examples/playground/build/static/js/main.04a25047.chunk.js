(this["webpackJsonp@atvise/caa-playground"]=this["webpackJsonp@atvise/caa-playground"]||[]).push([[0],{132:function(e,t,n){},174:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(8),c=n.n(o),i=n(7),u=n(114),s=n(213),l=n(214),d=n(39),p=n(197),f=n(199),m=n(201),b=n(202),h=n(203),v=n(215),g=n(218),j=n(217),O=n(206),w=n(207),y=n(208),E=[{name:"Basic usage",files:[{name:"app.jsx",contents:"import React from 'react';\nimport { useSubscription } from '@atvise/webmi-react';\n\nfunction MyLabel(props) {\n  const { loading, data, error } = useSubscription(props.address);\n\n  if (loading) return <i>loading...</i>;\n  if (error) return <i>An error ocurred: {error.message}</i>;\n\n  return <span>AGENT.OBJECTS.test currently is: {data.value.toFixed(2)}</span>;\n}\n\nexport default function App() {\n  return (\n    <p>\n      <MyLabel address=\"AGENT.OBJECTS.SimulatedData.double_1\" />\n    </p>\n  );\n}\n"}]},{name:"Chart",files:[{name:"app.jsx",contents:"import React, { useState, useEffect } from 'react';\nimport { useSubscription } from '@atvise/webmi-react';\nimport { VictoryChart, VictoryTheme, VictoryLine } from 'victory';\n\n/** A hook that collects values of the given variable */\nfunction useCollectedSamples(address) {\n  const [samples, setSamples] = useState([]);\n  const { loading, data, error } = useSubscription(address);\n\n  useEffect(() => {\n    if (data && (!samples.length || data.value !== samples[samples.length - 1].y)) {\n      setSamples([...samples, { x: new Date(data.timestamp), y: data.value }]);\n    }\n  }, [data, samples]);\n\n  return { loading, data: samples, error };\n}\n\nfunction Chart() {\n  const double1 = useCollectedSamples('AGENT.OBJECTS.SimulatedData.double_1');\n  const double2 = useCollectedSamples('AGENT.OBJECTS.SimulatedData.double_2');\n\n  if (double1.error || double2.error)\n    return <i>An error ocurred: {(double1.error || double2.error).message}</i>;\n  if (double1.data.length < 2 || double2.data.length < 2) return <i>loading...</i>;\n\n  return (\n    <VictoryChart theme={VictoryTheme.material} animate={{ duration: 200, easing: 'quadInOut' }}>\n      <VictoryLine data={double1.data} />\n      <VictoryLine data={double2.data} />\n    </VictoryChart>\n  );\n}\n\nexport default function App() {\n  return <Chart />;\n}\n"}]}],x=Object(p.a)({space:{flexGrow:1}});function k(e){var t=e.onSelectExample,n=Object(d.a)(),o=x(),c=Object(r.useState)(null),u=Object(i.a)(c,2),s=u[0],l=u[1],p=function(){return l(null)};return a.a.createElement(f.a,{position:"static"},a.a.createElement(m.a,null,a.a.createElement(b.a,{variant:"h6"},"webMI React Playground"),a.a.createElement("div",{className:o.space}),a.a.createElement(h.a,{color:"inherit",onClick:function(e){return l(e.currentTarget)}},"Select an example"),a.a.createElement(v.a,{anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:p},E.map((function(e){return a.a.createElement(g.a,{key:e.name,onClick:function(){return function(e){t(e),p()}(e)}},e.name)}))),a.a.createElement(j.a,{title:"Toggle dark mode"},a.a.createElement(O.a,{color:"inherit",onClick:n.toggle},n.value?a.a.createElement(w.a,null):a.a.createElement(y.a,null)))))}var S=n(11),C=n.n(S),M=n(17),A=n(115),N=n(28),T=n(216),B=n(209),D=n(21),I=n(104),R=(n(132),n(78),n(133),n(135),I.Controlled),L=Object(p.a)((function(){return{codemirror:{height:"100%",flex:1}}}));function P(e){var t=e.mode,n=e.value,o=e.onChange,c=e.readOnly,i=L(),u={mode:t,theme:"dark"===Object(D.a)().palette.type?"monokai":"default",lineNumbers:!0,readOnly:c,gutters:["CodeMirror-lint-markers"],lint:!0},s=Object(r.useCallback)((function(e,t,n){return null===o||void 0===o?void 0:o(n)}),[o]);return a.a.createElement(R,{className:i.codemirror,value:n,options:u,onBeforeChange:s})}function V(e){var t=e.files,n=e.onChange,o=Object(r.useState)(0),c=Object(i.a)(o,2),u=c[0],s=c[1],l=t[u],d=Object(r.useCallback)((function(e){n(t.map((function(t,n){return n===u?Object(N.a)(Object(N.a)({},t),{},{contents:e}):t})))}),[t,u,n]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(T.a,{value:u,onChange:function(e,t){return s(t)}},t.map((function(e){return a.a.createElement(B.a,{key:e.name,label:e.name})}))),a.a.createElement(P,{mode:"jsx",value:l.contents,onChange:d}))}var F=n(210),J=n(211);(function(){if(!window.webMI)throw new Error("No webmi detected. Is your atvise server running?");return window.webMI})().data;var U=Object(p.a)((function(e){return{iframe:{flex:1,width:"100%",height:"100%"},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}));function W(e){var t=e.bundle,n=Object(d.a)(),o=U(),c=Object(r.useState)(""),u=Object(i.a)(c,2),s=u[0],l=u[1],p=Object(r.useRef)(null),f=Object(r.useContext)(Ee);return Object(r.useEffect)((function(){if(!t)return console.log("Preview is out of date");l('\n<html>\n<head>\n  <title>Preview</title>\n</head>\n<body>\n  <div id="root"></div>\n\n  \x3c!-- Dependencies --\x3e\n  <script src="/webmi.js"><\/script>\n  '.concat(t.bundle.imports.map((function(e){return'<script src="'.concat(e,'"><\/script>')})).join("\n  "),"\n\n  \x3c!-- State hydration --\x3e\n  <script>\n    var replSettings = ").concat(JSON.stringify({darkMode:n}),"\n  <\/script>\n\n  \x3c!-- App --\x3e\n  <script>\n    ").concat(t.bundle.code,"\n  <\/script>\n</body>\n</html>"))}),[t,n]),a.a.createElement(a.a.Fragment,null,a.a.createElement("iframe",{src:"http://localhost:3000",className:o.iframe,frameBorder:"0",title:"Preview",srcDoc:s,ref:p,onLoad:function(e){var t=e.target.contentWindow;console.log("Preview loaded"),t.result&&f.setStatus(t.result)}}),p.current&&a.a.createElement(F.a,{color:"primary",className:o.fab,onClick:function(){var e,t;return null===(e=p.current)||void 0===e||null===(t=e.contentWindow)||void 0===t?void 0:t.location.reload()}},a.a.createElement(J.a,null)))}function G(e){var t=e.bundle,n=Object(r.useState)(0),o=Object(i.a)(n,2),c=o[0],u=o[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(T.a,{value:c,onChange:function(e,t){return u(t)}},a.a.createElement(B.a,{label:"Preview"})),a.a.createElement(W,{bundle:t}))}var _,z=n(26),$=n(27),q=function(){return new Worker(n.p+"static/js/bundle.c24ae3d3.worker.js")},H=0,K=function(){function e(){var t=this;Object(z.a)(this,e),this.handlers=new Map,this.worker=void 0,_||(_=new q),this.worker=_,this.worker.addEventListener("message",(function(e){var n=t.handlers.get(e.data.uid);n&&(n(e.data),"result"===e.data.type&&t.handlers.delete(e.data.uid))}))}return Object($.a)(e,[{key:"bundle",value:function(e){var t=this,n=++H;return new Promise((function(r,a){t.handlers.set(n,r),t.worker.postMessage({type:"bundle",uid:n,files:e})}))}}]),e}(),Q=n(105),X=n(106),Y=n(112),Z=n(113);function ee(e){var t=e.include;return{name:"babel",transform:function(e,n){if(!t(n))return null;var r=Object(Z.transform)(e,{presets:["react",["env",{modules:!1}]]});return{code:r.code,map:r.map}}}}var te=function(e){return"@repl/".concat(e)},ne=function(e){return e.startsWith("@repl/")},re=te("input"),ae=te("runtime.jsx");function oe(e){var t=new Map([[ae,"\nimport React, { useMemo } from 'react';\nimport ReactDOM from 'react-dom';\nimport { createMuiTheme, CssBaseline, ThemeProvider, Container } from '@material-ui/core';\n\nexport function StyledApp({ children }) {\n  const { value: prefersDarkMode } = window.replSettings.darkMode;\n  const theme = useMemo(() => createMuiTheme({\n    palette: {\n      type: prefersDarkMode ? 'dark' : 'light',\n    },\n  }), []);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Container>\n        {children}\n      </Container>\n    </ThemeProvider>\n  );\n}\n\nexport function runApp(App, target) {\n  try {\n    const start = Date.now();\n\n    ReactDOM.render((\n      <StyledApp>\n        <App />\n      </StyledApp>\n    ), target);\n    window.result = { type: 'ready', stats: { duration: Date.now() - start } };\n  } catch (error) {\n    console.error(error);\n    window.result = { type: 'error', error };\n  }\n}\n"],[re,"import { runApp } from '".concat(ae,"';\nimport App from './").concat(e.name,"';\n\nrunApp(App, document.getElementById('root'));\n")]]);return{name:"repl-runtime",resolveId:function(e){return t.has(e)?e:null},load:function(e){return t.get(e)}}}var ce=new Map,ie=new Map,ue=function(e){if(!e.ok)throw Object.assign(new Error(e.statusText||"Status ".concat(e.status)),{url:e.url});return e};function se(e){if(ce.has(e))return ce.get(e);var t=fetch(e,{redirect:"follow",method:"HEAD"}).then(ue).catch((function(t){throw ce.delete(e),t}));return ce.set(e,t),t}function le(e,t){if(ie.has(e))return ie.get(e);var n=fetch(e,{redirect:"follow"}).then(ue).then(t).catch((function(t){throw ie.delete(e),t}));return ie.set(e,n),n}var de=function(e){return e.startsWith("https:")||e.startsWith("http:")},pe=function(e){return/\.[a-z]+$/.test(e)};function fe(e){return me.apply(this,arguments)}function me(){return(me=Object(M.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le("".concat(t,"/package.json"),(function(e){return e.json()}));case 2:return n=e.sent,e.abrupt("return",n.module||n.main);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){for(var t=e.packagesUrl,n=e.entries,r=void 0===n?{}:n,a={},o=0,c=Object.entries(r);o<c.length;o++){var u=Object(i.a)(c[o],2),s=u[0],l=u[1],d=new URL(l.entry,"".concat(t,"/").concat(s,"/")).href;l.url=d,a[d]=l.global}return{name:"cdnjs",resolveId:function(e,n){return Object(M.a)(C.a.mark((function a(){var o,c;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("Resolving",e,"from",n),!r[e]){a.next=5;break}return a.abrupt("return",{id:r[e].url,external:!0});case 5:if(!de(e)){a.next=9;break}o=e,a.next=23;break;case 9:if(!e.startsWith(".")){a.next=15;break}if(n){a.next=12;break}return a.abrupt("return",null);case 12:o=new URL(e,pe(n)?n:"".concat(n,"/")).href,a.next=23;break;case 15:if(o="".concat(t,"/").concat(e),!e.match(/\//)||e.match(/^@[^/]+\/[^/]+$/)){a.next=19;break}a.next=23;break;case 19:return a.next=21,fe(o);case 21:(c=a.sent)&&(o=new URL(c,"".concat(o,"/")).href);case 23:if(pe(o)){a.next=33;break}return a.prev=24,a.next=27,se(o);case 27:return a.abrupt("return",a.sent.url);case 30:throw a.prev=30,a.t0=a.catch(24),new Error("Unable to resolve '".concat(e,"' from '").concat(n,"': ").concat(a.t0.message," (").concat(a.t0.url||"no url",")"));case 33:return a.abrupt("return",o);case 34:case"end":return a.stop()}}),a,null,[[24,30]])})))()},outputOptions:function(e){return Object(N.a)(Object(N.a)({},e),{},{globals:Object(N.a)(Object(N.a)({},a),e.globals||{})})},load:function(){var e=Object(M.a)(C.a.mark((function e(n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n,de(n)||(console.warn("Not a url",n),r="".concat(t,"/").concat(n)),e.abrupt("return",le(r,(function(e){return e.text()})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}var he=new Error("Aborted"),ve=function(e,t){return e.data.type===t},ge=function(e){return"error"===e.type},je=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://unpkg.com";Object(z.a)(this,e),this.packagesUrl=t,this.rollupCache=void 0,this.currentBuildId=0}return Object($.a)(e,[{key:"bundle",value:function(){var e=Object(M.a)(C.a.mark((function e(t){var n,r,a,o,c,u,s,l,d=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=++this.currentBuildId,r=Date.now(),(a=function(){if(n!==d.currentBuildId)throw he})(),o=function(e){return t.find((function(t){return"./".concat(t.name)===e}))},e.next=7,Object(Q.rollup)({input:re,cache:this.rollupCache,onwarn:function(e){console.warn(e)},plugins:[{name:"cancel",resolveId:function(){return a(),null},load:function(){return a(),null}},oe(t[0]),{name:"repl-files",resolveId:function(e){return o(e)?e:null},load:function(e){var t;return(null===(t=o(e))||void 0===t?void 0:t.contents)||null}},Object(Y.a)({values:{"process.env.NODE_ENV":'"production"'}}),Object(X.a)({}),be({packagesUrl:this.packagesUrl,entries:{react:{entry:"umd/react.production.min.js",global:"React"},"react-dom":{entry:"umd/react-dom.production.min.js",global:"ReactDOM"},"@material-ui/core":{entry:"umd/material-ui.production.min.js",global:"MaterialUI"},victory:{entry:"dist/victory.min.js",global:"Victory"}}}),ee({include:function(e){return!!o(e)||ne(e)}})]});case 7:return c=e.sent,a(),this.rollupCache=c.cache,e.next=12,c.generate({format:"iife",name:"replApp"});case 12:return u=e.sent,s=Object(i.a)(u.output,1),l=s[0],a(),e.abrupt("return",{id:n,bundle:l,stats:{duration:Date.now()-r}});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}());onmessage=function(){var e=Object(M.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.info("Received",t.data.type,"message",t),!ve(t,"bundle")){e.next=13;break}return e.prev=2,e.next=5,je.bundle(t.data.files).catch((function(e){if(e!==he)throw console.error("Rethrowing"),e}));case 5:n=e.sent,postMessage({type:"result",uid:t.data.uid,result:n}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(Object.fromEntries(Object.entries(e.t0))),postMessage({type:"error",uid:t.data.uid,error:Object(N.a)({message:e.t0.message,stack:e.t0.stack},Object.fromEntries(Object.entries(e.t0)))});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();var Oe=n(212),we=Object(p.a)((function(e){return{pane:{flex:1,display:"flex",flexDirection:"column",height:"100%"},content:{flex:1,position:"relative",display:"flex",flexDirection:"column",overflow:"auto"},status:{flexGrow:0,position:"relative",backgroundColor:e.palette.background.paper},alert:{padding:"0.5em 1em",whiteSpace:"pre-wrap",textAlign:"center"},code:{fontFamily:"monospace",textAlign:"left"},error:{backgroundColor:e.palette.error.light,color:e.palette.error.contrastText},info:{},progress:{display:"flex",justifyContent:"center",alignItems:"center"},success:{},alertSpace:{width:"0.5em"}}}));function ye(e){var t=e.children,n=e.error,r=e.status,o=we(),c=n?{severity:"error",text:n.message}:r,i=n&&n.message.split("\n").length>1;return a.a.createElement("div",{className:o.pane},a.a.createElement("div",{className:o.content},t),a.a.createElement("div",{className:o.status},c&&a.a.createElement("div",{className:[o.alert,i?o.code:"",o[c.severity]].join(" ")},"progress"===c.severity&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Oe.a,{size:"1em",color:"secondary"}),a.a.createElement("div",{className:o.alertSpace})),c.text)))}var Ee=Object(r.createContext)({setStatus:function(e){}}),xe=Object(p.a)((function(){return{root:{position:"relative",height:"calc(100vh - 4rem)"}}}));function ke(e){var t=e.example,n=xe(),o=function(e){var t=e.storage,n=void 0===t?localStorage:t,a=e.key,o=e.defaultValue,c=Object(r.useState)((function(){var e=n.getItem(a);return e?JSON.parse(e):o})),u=Object(i.a)(c,2),s=u[0],l=u[1];return[s,function(e){n.setItem(a,JSON.stringify(e)),l(e)}]}({key:"repl-files",defaultValue:E[0].files}),c=Object(i.a)(o,2),u=c[0],s=c[1],l=Object(r.useState)([]),d=Object(i.a)(l,2),p=d[0],f=d[1],m=Object(r.useState)(),b=Object(i.a)(m,2),h=b[0],v=b[1],g=Object(r.useState)(),j=Object(i.a)(g,2),O=j[0],w=j[1],y=Object(r.useState)(),x=Object(i.a)(y,2),k=x[0],S=x[1];Object(r.useEffect)((function(){t&&s(t.files)}),[t,s]),Object(r.useEffect)((function(){console.log("files: ".concat(u.map((function(e){return e.name})).join(",")))}),[u]);var N=Object(r.useRef)();return Object(r.useEffect)((function(){N.current=new K}),[]),Object(r.useEffect)((function(){var e=!1;function t(){return(t=Object(M.a)(C.a.mark((function t(){var n;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:return f([]),v({severity:"progress",text:"Bundler is running..."}),console.info("Rebundling application"),t.next=7,N.current.bundle(u);case 7:if(n=t.sent,!e){t.next=10;break}return t.abrupt("return");case 10:ge(n)?(console.error("Bundling failed",n.error),f([n.error])):n.result&&(console.log(n.result),console.info("Bundler finished in",n.result.stats.duration,"milliseconds"),S(n.result),v({severity:"success",text:"Bundled in ".concat(n.result.stats.duration,"ms")}));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return v({severity:"info",text:"Input changed"}),setTimeout((function(){return t.apply(this,arguments)}),300),function(){e=!0}}),[u]),Object(r.useEffect)((function(){w({severity:"info",text:"Waiting for bundle"})}),[]),a.a.createElement("div",{className:n.root},a.a.createElement(A.a,{split:"vertical"},a.a.createElement(ye,{error:null===p||void 0===p?void 0:p[0],status:h},a.a.createElement(V,{files:u,onChange:s})),a.a.createElement(ye,{status:O},a.a.createElement(Ee.Provider,{value:{setStatus:function(e){w({severity:"error"===e.type?"error":"success",text:"error"===e.type?e.error.message:"Loaded in ".concat(e.stats.duration,"ms")})}}},a.a.createElement(G,{bundle:k})))))}var Se=function(){var e=Object(d.a)().value,t=Object(r.useMemo)((function(){return Object(u.a)({palette:{type:e?"dark":"light",primary:{main:"rgb(87, 87, 87)"},secondary:{main:"rgb(242, 214, 0)"}}})}),[e]),n=Object(r.useState)(),o=Object(i.a)(n,2),c=o[0],p=o[1];return a.a.createElement(s.a,{theme:t},a.a.createElement(l.a,null),a.a.createElement(k,{onSelectExample:function(e){p(e)}}),a.a.createElement(ke,{example:c}))},Ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,219)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))};c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Se,null)),document.getElementById("root")),Ce()}},[[174,1,2]]]);
//# sourceMappingURL=main.04a25047.chunk.js.map